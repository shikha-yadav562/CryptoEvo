<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vigen√®re Cipher - Pro Edition</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=JetBrains+Mono:wght@300;500;700&display=swap"
        rel="stylesheet">

    <style>
        :root {
            --neon-cyan: #00e0ff;
            --neon-purple: #ff9cff;
            --neon-green: #7CFF7C;
            --glass: rgba(10, 15, 30, 0.85);
            --glass-border: rgba(0, 224, 255, 0.3);
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'JetBrains Mono', monospace;
            background: #050810;
            color: #fff;
            min-height: 100vh;
            overflow: hidden;
        }

        #three-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
        }

        /* Sidebar & Glass HUD Styling from Homepage */
        .glass-hud {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(0, 229, 255, 0.2);
        }

        #sidebar {
            transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 150;
        }

        .sidebar-closed {
            transform: translateX(-100%);
        }

        .sidebar-open {
            transform: translateX(0);
        }

        .sidebar-item {
            opacity: 0;
            transform: translateX(-20px);
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .sidebar-open .sidebar-item {
            opacity: 1;
            transform: translateX(0);
        }

        .sidebar-item:nth-child(1) {
            transition-delay: 0.1s;
        }

        .sidebar-item:nth-child(2) {
            transition-delay: 0.2s;
        }

        .sidebar-item:nth-child(3) {
            transition-delay: 0.3s;
        }

        /* Vigenere Specific UI */
        .terminal-wrapper {
            display: flex;
            flex-direction: column;
            height: 100vh;
            padding: 80px 40px 20px 40px;
            /* Top padding for nav */
            box-sizing: border-box;
            gap: 15px;
        }

        .font-header {
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 10px;
            font-size: 2.2rem;
            color: #fff;
            text-shadow: 0 0 20px rgba(0, 224, 255, 0.8);
            margin: 0;
        }

        .card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.9);
            position: relative;
            overflow: hidden;
        }

        .hologram::after {
            content: "";
            position: absolute;
            top: -100%;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(0, 224, 255, 0) 0%, rgba(0, 224, 255, 0.08) 50%, rgba(0, 224, 255, 0) 100%);
            animation: scan 3s linear infinite;
            pointer-events: none;
        }

        @keyframes scan {
            0% {
                top: -100%;
            }

            100% {
                top: 100%;
            }
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1.2fr 1.3fr 1fr;
            gap: 15px;
            flex-grow: 1;
            overflow: hidden;
        }

        input,
        select {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid var(--neon-cyan);
            color: white;
            padding: 12px;
            border-radius: 8px;
            outline: none;
            font-family: 'JetBrains Mono', monospace;
        }

        button.exec-btn {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(135deg, #00e0ff, #4facfe);
            padding: 12px 40px;
            border: none;
            border-radius: 8px;
            font-weight: 900;
            cursor: pointer;
            text-transform: uppercase;
            transition: 0.3s;
        }

        button.exec-btn:hover {
            box-shadow: 0 0 25px var(--neon-cyan);
            transform: scale(1.02);
        }

        .alpha-strip {
            display: grid;
            grid-template-columns: repeat(26, 1fr);
            gap: 5px;
        }

        .alpha-box {
            height: 45px;
            background: rgba(20, 26, 51, 0.9);
            border: 1px solid rgba(0, 224, 255, 0.3);
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 14px;
        }

        .step {
            background: rgba(255, 255, 255, 0.03);
            padding: 7px 15px;
            margin-top: 10px;
            border-left: 5px solid var(--neon-cyan);
            border-radius: 4px;
            font-size: 14px;
        }

        .step-answer {
            display: block;
            font-size: 18px;
            font-weight: 900;
            margin-top: 8px;
            font-family: 'Orbitron', sans-serif;
        }

        .table-scroll {
            overflow-y: auto;
            scrollbar-width: none;
        }

        .table-scroll::-webkit-scrollbar {
            display: none;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
        }

        th {
            background: rgba(0, 224, 255, 0.2);
            color: var(--neon-cyan);
            padding: 12px;
            position: sticky;
            top: 0;
            font-family: 'Orbitron';
        }

        td {
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 8px;
        }

        #evolution-panel {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        #evolution-panel.active {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>

<body>

    <canvas id="three-canvas"></canvas>

    <aside id="sidebar"
        class="fixed top-0 left-0 h-full w-80 glass-hud border-r border-cyan-500/30 sidebar-closed p-0 overflow-y-auto">
        <div class="p-8 flex justify-between items-center border-b border-white/10 bg-black/20">
            <div>
                <span
                    class="font-header text-xs font-black text-cyan-400 tracking-[0.3em] uppercase block">Navigation</span>
                <span class="text-[9px] text-gray-500 font-mono">ID: CIPHER_PRO_V2</span>
            </div>
            <button onclick="toggleSidebar()"
                class="w-10 h-10 flex items-center justify-center border border-white/10 rounded-full hover:bg-cyan-500 hover:text-black transition-all group">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </button>
        </div>
        <div class="p-4 space-y-2">

            <!-- Home -->
            <a href="homepage.html" class="group flex flex-col gap-1 p-3 rounded-md border-l-4 border-transparent
              hover:border-cyan-400 hover:bg-cyan-400/10
              transition-all duration-300">

                <div class="flex items-center gap-3">
                    <!-- <span class="text-lg opacity-80 group-hover:opacity-100">üè†</span> -->
                    <h4 class="font-header text-[11px] font-semibold tracking-widest uppercase
                       text-gray-300 group-hover:text-cyan-400">
                        Return Home
                    </h4>
                </div>
            </a>

            <a href="caeser.html" class="group flex flex-col gap-1 p-3 rounded-md border-l-4 border-transparent
              hover:border-cyan-400 hover:bg-cyan-400/10
              transition-all duration-300">

                <div class="flex items-center gap-3">
                    <!-- <span class="text-lg opacity-80 group-hover:opacity-100">üè†</span> -->
                    <h4 class="font-header text-[11px] font-semibold tracking-widest uppercase
                       text-gray-300 group-hover:text-cyan-400">
                        Caeser Cipher
                    </h4>
                </div>
            </a>

            <a href="modified.html" class="group flex flex-col gap-1 p-3 rounded-md border-l-4 border-transparent
              hover:border-cyan-400 hover:bg-cyan-400/10
              transition-all duration-300">

                <div class="flex items-center gap-3">
                    <!-- <span class="text-lg opacity-80 group-hover:opacity-100">üè†</span> -->
                    <h4 class="font-header text-[11px] font-semibold tracking-widest uppercase
                       text-gray-300 group-hover:text-cyan-400">
                        Modified Ceaser Cipher
                    </h4>
                </div>
            </a>

            <!-- Active: Vigen√®re -->
            <div class="flex flex-col gap-1 p-3 rounded-md border-l-4 border-cyan-400
                bg-cyan-500/10 shadow-[0_0_12px_rgba(34,211,238,0.15)]">

                <div class="flex items-center gap-3">
                    <!-- <span class="text-lg text-cyan-400">üé≠</span> -->
                    <h4 class="font-header text-[11px] font-bold tracking-widest uppercase text-cyan-400">
                        Vigen√®re Cipher
                    </h4>
                </div>
            </div>

            <a href="Playfair2.html" class="group flex flex-col gap-1 p-3 rounded-md border-l-4 border-transparent
              hover:border-cyan-400 hover:bg-cyan-400/10
              transition-all duration-300">

                <div class="flex items-center gap-3">
                    <!-- <span class="text-lg opacity-80 group-hover:opacity-100">üè†</span> -->
                    <h4 class="font-header text-[11px] font-semibold tracking-widest uppercase
                       text-gray-300 group-hover:text-cyan-400">
                        Playfair Cipher
                    </h4>
                </div>
            </a>

            <a href="vernam.html" class="group flex flex-col gap-1 p-3 rounded-md border-l-4 border-transparent
              hover:border-cyan-400 hover:bg-cyan-400/10
              transition-all duration-300">

                <div class="flex items-center gap-3">
                    <!-- <span class="text-lg opacity-80 group-hover:opacity-100">üè†</span> -->
                    <h4 class="font-header text-[11px] font-semibold tracking-widest uppercase
                       text-gray-300 group-hover:text-cyan-400">
                        Vernam Cipher
                    </h4>
                </div>
            </a>

            <a href="hill.html" class="group flex flex-col gap-1 p-3 rounded-md border-l-4 border-transparent
              hover:border-cyan-400 hover:bg-cyan-400/10
              transition-all duration-300">

                <div class="flex items-center gap-3">
                    <!-- <span class="text-lg opacity-80 group-hover:opacity-100">üè†</span> -->
                    <h4 class="font-header text-[11px] font-semibold tracking-widest uppercase
                       text-gray-300 group-hover:text-cyan-400">
                        Hill Cipher
                    </h4>
                </div>
            </a>

            <a href="railfence.html" class="group flex flex-col gap-1 p-3 rounded-md border-l-4 border-transparent
              hover:border-cyan-400 hover:bg-cyan-400/10
              transition-all duration-300">

                <div class="flex items-center gap-3">
                    <!-- <span class="text-lg opacity-80 group-hover:opacity-100">üè†</span> -->
                    <h4 class="font-header text-[11px] font-semibold tracking-widest uppercase
                       text-gray-300 group-hover:text-cyan-400">
                        Railfence Cipher
                    </h4>
                </div>
            </a>

            <a href="aes.html" class="group flex flex-col gap-1 p-3 rounded-md border-l-4 border-transparent
              hover:border-cyan-400 hover:bg-cyan-400/10
              transition-all duration-300">

                <div class="flex items-center gap-3">
                    <!-- <span class="text-lg opacity-80 group-hover:opacity-100">üè†</span> -->
                    <h4 class="font-header text-[11px] font-semibold tracking-widest uppercase
                       text-gray-300 group-hover:text-cyan-400">
                        AES
                    </h4>
                </div>
            </a>
            <a href="des.html" class="group flex flex-col gap-1 p-3 rounded-md border-l-4 border-transparent
              hover:border-cyan-400 hover:bg-cyan-400/10
              transition-all duration-300">

                <div class="flex items-center gap-3">
                    <!-- <span class="text-lg opacity-80 group-hover:opacity-100">üè†</span> -->
                    <h4 class="font-header text-[11px] font-semibold tracking-widest uppercase
                       text-gray-300 group-hover:text-cyan-400">
                        DES
                    </h4>
                </div>
            </a>

        </div>

    </aside>

    <nav
        class="fixed top-0 w-full z-[100] border-b border-cyan-500/10 px-8 py-4 flex justify-between items-center glass-hud">
        <div class="flex items-center space-x-4">
            <button onclick="toggleSidebar()" class="p-2 hover:bg-cyan-500/10 rounded-full transition-colors group">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-cyan-400" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
            <span class="font-header text-xl tracking-tighter font-black uppercase"
                style="font-size: 20px; letter-spacing: 1px;">Crypto<span class="text-cyan-400">Evo</span></span>
        </div>
        <div class="hidden md:flex space-x-8 text-[10px] tracking-widest uppercase font-bold text-gray-400">
            <span class="text-cyan-500 animate-pulse">STATUS: VIGENERE_ACTIVE</span>
        </div>
    </nav>

    <div class="terminal-wrapper">
        <div class="text-center">
            <h1 class="font-header" id="scramble-target">Vigen√®re Cipher</h1>
        </div>

        <div class="card hologram">
            <div class="flex gap-4 justify-center">
                <select id="cipherMode" class="w-48">
                    <option value="ENCRYPT">ENCRYPT</option>
                    <option value="DECRYPT">DECRYPT</option>
                </select>
                <input id="plaintext" value="SCHOOL" placeholder="Text Content" class="flex-1">
                <input id="key" value="KEY" placeholder="Secret Key" class="flex-1">
                <button onclick="handleExecution()" class="exec-btn">Execute</button>
            </div>
        </div>

        <div class="card">
            <h3
                style="margin: 0 0 10px 0; font-size: 14px; color: var(--neon-cyan); letter-spacing: 2px; font-family: 'Orbitron';">
                INDEX_MAPPING_SYSTEM</h3>
            <div id="alphabetStrip" class="alpha-strip"></div>
        </div>

        <div class="main-grid">
            <div class="card hologram">
                <h3 style="margin: 0; font-size: 16px; font-family: 'Orbitron';">PROCESSING_STEPS</h3>
                <div id="step1" class="step">Waiting for execution...</div>
                <div id="step2" class="step">Waiting for execution...</div>
                <div id="step3" class="step">Waiting for execution...</div>
                <div id="step4" class="step">Waiting for execution...</div>
            </div>

            <div class="card table-scroll">
                <h3 style="margin: 0 0 10px 0; font-size: 16px; font-family: 'Orbitron';">RESULT_MATRIX</h3>
                <table id="vigenereVertical">
                    <thead>
                        <tr>
                            <th>In</th>
                            <th>Key</th>
                            <th>Val1</th>
                            <th>Val2</th>
                            <th>Mod</th>
                            <th>Out</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div id="final-result-container" class="mt-4 p-4 bg-black/40 rounded border border-cyan-500 hidden">
                    <span id="final-string" class="text-xl font-black tracking-widest text-white"></span>
                </div>
            </div>

            <div id="evolution-panel" class="card hologram" style="border-color: var(--neon-purple);">
                <h3 style="color: var(--neon-purple); margin: 0; font-size: 16px; font-family: 'Orbitron';">Drawbacks
                </h3>
                <div class="step" style="border-left-color: var(--neon-purple);">
                    <b style="color: var(--neon-purple);">Weaknesses:</b>
                    <ul class="pl-5 mt-2 text-xs">
                        <li>Vulnerable to Kasiski examination</li>
                        <li>Key repetition creates patterns</li>
                    </ul>
                </div>
                <div class="step" style="border-left-color: var(--neon-green); margin-top: 20px;">
                    <b style="color: var(--neon-green);">Evolution:</b>
                    <p class="text-xs mt-1">Playfair Cipher was later introduced to encrypt letter pairs to break
                        single-letter frequency analysis.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* Sidebar Logic */
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('sidebar-closed');
            sidebar.classList.toggle('sidebar-open');
        }

        /* Three.js Background */
        let scene, camera, renderer, stars;
        function initThree() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('three-canvas'), alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            const geometry = new THREE.BufferGeometry();
            const pos = [];
            for (let i = 0; i < 4000; i++) {
                pos.push(Math.random() * 2000 - 1000, Math.random() * 2000 - 1000, Math.random() * 2000 - 1000);
            }
            geometry.setAttribute('position', new THREE.Float32BufferAttribute(pos, 3));
            const material = new THREE.PointsMaterial({ color: 0x00e0ff, size: 2, transparent: true, opacity: 0.5 });
            stars = new THREE.Points(geometry, material);
            scene.add(stars);
            camera.position.z = 500;
        }

        function animateBackground() {
            requestAnimationFrame(animateBackground);
            stars.rotation.y += 0.001;
            renderer.render(scene, camera);
        }

        /* Vigenere Logic */
        const strip = document.getElementById("alphabetStrip");
        for (let i = 0; i < 26; i++) {
            const box = document.createElement("div");
            box.className = "alpha-box";
            box.id = "alpha-" + i;
            box.innerHTML = `${String.fromCharCode(65 + i)}<span style="font-size:10px; opacity:0.5;">${i}</span>`;
            strip.appendChild(box);
        }

        function handleExecution() {
            const text = document.getElementById("plaintext").value.toUpperCase().replace(/[^A-Z]/g, '');
            const k = document.getElementById("key").value.toUpperCase().replace(/[^A-Z]/g, '');
            const mode = document.getElementById("cipherMode").value;

            if (text && k) {
                document.getElementById('evolution-panel').classList.add('active');
                startAnimationFirstLetter(text, k, mode);
                buildVerticalTable(text, k, mode);
            }
        }

        function startAnimationFirstLetter(text, key, mode) {
            gsap.killTweensOf("*");
            document.querySelectorAll(".alpha-box").forEach(b => {
                b.style.backgroundColor = "rgba(20, 26, 51, 0.9)";
                b.style.color = "#fff";
            });

            const isEncrypt = mode === "ENCRYPT";
            const pVal = text[0].charCodeAt(0) - 65;
            const kVal = key[0].charCodeAt(0) - 65;
            const mod = isEncrypt ? (pVal + kVal) % 26 : (pVal - kVal + 26) % 26;

            document.getElementById("step1").innerHTML = isEncrypt ? "Step 1: Locate Plain Letter" : "Step 1: Locate Cipher Letter";
            document.getElementById("step2").innerHTML = "Step 2: Locate Key Letter";
            document.getElementById("step3").innerHTML = isEncrypt ? "Step 3: (P + K) mod 26" : "Step 3: (C - K + 26) mod 26";
            document.getElementById("step4").innerHTML = "Step 4: Resolve Result Letter";

            gsap.to(`#alpha-${pVal}`, {
                backgroundColor: "#00e0ff", color: "#000", duration: 0.5, onComplete: () => {
                    document.getElementById("step1").appendChild(createSpan(`${text[0]} ‚Üí ${pVal}`, "var(--neon-cyan)"));
                }
            });

            gsap.to(`#alpha-${kVal}`, {
                delay: 0.8, backgroundColor: "#7CFF7C", color: "#000", duration: 0.5, onComplete: () => {
                    document.getElementById("step2").appendChild(createSpan(`${key[0]} ‚Üí ${kVal}`, "var(--neon-green)"));
                }
            });

            gsap.delayedCall(1.6, () => {
                document.getElementById("step3").appendChild(createSpan(`Result: ${mod}`, "white"));
            });

            gsap.to(`#alpha-${mod}`, {
                delay: 2.4, backgroundColor: "#ff9cff", color: "#000", duration: 0.5, onComplete: () => {
                    document.getElementById("step4").appendChild(createSpan(`Char: ${String.fromCharCode(mod + 65)}`, "var(--neon-purple)"));
                }
            });
        }

        function buildVerticalTable(text, k, mode) {
            const isEncrypt = mode === "ENCRYPT";
            const tbody = document.getElementById("vigenereVertical").tBodies[0];
            tbody.innerHTML = "";
            let finalString = "";

            for (let i = 0; i < text.length; i++) {
                const pVal = text[i].charCodeAt(0) - 65;
                const kVal = k[i % k.length].charCodeAt(0) - 65;
                const modResult = isEncrypt ? (pVal + kVal) % 26 : (pVal - kVal + 26) % 26;
                const charResult = String.fromCharCode(modResult + 65);
                finalString += charResult;
                tbody.insertAdjacentHTML('beforeend', `<tr><td>${text[i]}</td><td>${k[i % k.length]}</td><td>${pVal}</td><td>${kVal}</td><td>${modResult}</td><td style="color:var(--neon-cyan); font-weight:900;">${charResult}</td></tr>`);
            }
            document.getElementById("final-string").innerText = finalString;
            document.getElementById("final-result-container").style.display = "block";
        }

        function createSpan(text, color) {
            const span = document.createElement("div");
            span.className = "step-answer";
            span.style.color = color;
            span.innerHTML = text;
            return span;
        }

        window.onload = () => {
            initThree();
            animateBackground();
        };
    </script>

</body>

</html>